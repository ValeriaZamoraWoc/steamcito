<div class="search-container">
  <header class="header-simple">
    <h1>Buscador</h1>
    <p>Consulta juegos, empresas, usuarios o grupos familiares.</p>
  </header>

  <form (ngSubmit)="buscar()" class="search-form">
    <div class="input-group">
      <input
        type="text"
        [(ngModel)]="query"
        name="query"
        placeholder="Escribe tu búsqueda..."
        required
        class="input-main"
      />
      <button type="submit" class="btn-primary">Buscar</button>
    </div>

    <div class="filter-tabs">
      <label class="tab" [class.active]="tipo === 'juego'">
        <input type="radio" name="tipo" value="juego" [(ngModel)]="tipo">
        <span>Juegos</span>
      </label>

      <label class="tab" [class.active]="tipo === 'categoria'">
        <input type="radio" name="tipo" value="categoria" [(ngModel)]="tipo">
        <span>Categorías</span>
      </label>

      <label class="tab" [class.active]="tipo === 'clasificacion'">
        <input type="radio" name="tipo" value="clasificacion" [(ngModel)]="tipo">
        <span>Clasificación</span>
      </label>

      <label class="tab" *ngIf="puedeBuscarEmpresa" [class.active]="tipo === 'empresa'">
        <input type="radio" name="tipo" value="empresa" [(ngModel)]="tipo">
        <span>Empresas</span>
      </label>

      <label class="tab" *ngIf="puedeBuscarSocial" [class.active]="tipo === 'usuariomail'">
        <input type="radio" name="tipo" value="usuariomail" [(ngModel)]="tipo">
        <span>Email</span>
      </label>

      <label class="tab" *ngIf="puedeBuscarSocial" [class.active]="tipo === 'usuarionick'">
        <input type="radio" name="tipo" value="usuarionick" [(ngModel)]="tipo">
        <span>Nickname</span>
      </label>

      <label class="tab" *ngIf="puedeBuscarSocial" [class.active]="tipo === 'grupofamiliar'">
        <input type="radio" name="tipo" value="grupofamiliar" [(ngModel)]="tipo">
        <span>Grupos</span>
      </label>
    </div>
  </form>

  <div class="results-container" *ngIf="resultados?.length">
    <div class="results-header">
      {{ resultados.length }} coincidencias encontradas
    </div>

    <div class="results-list">
      <div *ngFor="let item of resultados" class="result-item">
        <div class="item-info">
          <h4>{{ item.nombreJuego || item.nombre || item.nickname || item.nombreGrupo }}</h4>
          <p>{{ item.descripcion || item.mail || 'ID: #' + item.idGrupoFamiliar }}</p>
        </div>
        
        <div class="item-actions">
          <a *ngIf="['juego', 'categoria', 'clasificacion'].includes(tipo)" 
             [routerLink]="loginService.isDesarrollador() ? ['/app/home-dev/juego', item.id] : ['/app/juego', item.id]" 
             class="btn-outline">
             Detalles
          </a>
          
          <a *ngIf="tipo === 'empresa'" [routerLink]="['/app/home-dev/ver-perfil-empresa', item.idEmpresa]" class="btn-outline">Perfil</a>
          <a *ngIf="tipo === 'usuariomail' || tipo === 'usuarionick'" [routerLink]="['/app/perfil-usuario', item.mail]" class="btn-outline">Perfil</a>
          <a *ngIf="tipo === 'grupofamiliar'" [routerLink]="['/app/perfil-grupo', item.idGrupoFamiliar]" class="btn-outline">Ver Grupo</a>
        </div>
      </div>
    </div>
  </div>
</div>