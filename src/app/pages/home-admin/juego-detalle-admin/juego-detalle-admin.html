<div class="steam-container">

  <div *ngIf="cargando" class="loading-state-overlay">
    <div class="steam-spinner"></div>
    <p>Sincronizando datos del servidor...</p>
  </div>

  <div *ngIf="error" class="error-banner-steam">
    <span class="icon">‚ö†Ô∏è</span> {{ error }}
  </div>

  <div *ngIf="juego" class="game-page-layout">

    <header class="game-header-title">
      <div class="breadcrumb">Todos los juegos > {{ juego.nombreJuego }}</div>
      <h1>{{ juego.nombreJuego }}</h1>
    </header>

    <div class="game-flex-content">

      <div class="main-column">
        <div class="hero-image-container">
          <img
            [src]="juego.urlImagen"
            class="game-hero-img"
            (error)="onImgError($event)"
          >
          <div class="image-grad"></div>
        </div>

        <div class="description-section">
          <h3>Acerca de este juego</h3>
          <div class="divider-steam"></div>
          <p class="game-desc-text">{{ juego.descripcion }}</p>
        </div>
      </div>

      <aside class="side-column">
        <div class="info-card-steam">
          
          <div class="price-section">
            <div class="price-box">
              <span class="currency">Q</span>
              <span class="amount">{{ juego.precio | number:'1.2-2' }}</span>
            </div>
            <span class="stock-badge" [class.out]="!juego.enVenta">
              {{ juego.enVenta ? 'En Venta' : 'Retirado' }}
            </span>
          </div>

          <div class="metadata-list">
            <div class="meta-item">
              <span class="label">Lanzamiento</span>
              <span class="value">{{ juego.fechaLanzamiento | date:'dd MMM, yyyy' }}</span>
            </div>
          </div>

          <div class="admin-control-panel">
            <div class="admin-header">
              <span class="admin-icon">üõ†Ô∏è</span>
              <h4>Panel de Clasificaci√≥n</h4>
            </div>
            
            <div class="control-body">
              <label for="class-select">Cambie la clasificacion</label>
              <div class="select-wrapper">
                <select id="class-select" [(ngModel)]="clasificacionSeleccionada">
                  <option *ngFor="let c of clasificaciones" [value]="c.idClasificacion">
                    {{ c.nombreCalsificacion }}
                  </option>
                </select>
              </div>

              <button
                class="btn-save-meta"
                (click)="cambiarClasificacion()"
              >
                Actualizar Metadatos
              </button>
            </div>
          </div>

        </div>
      </aside>
    </div>
  </div>
</div>
