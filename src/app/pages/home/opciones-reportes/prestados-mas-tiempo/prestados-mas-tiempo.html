<div class="report-content">
  <div class="report-view-header">
    <h3>Uso de Préstamos</h3>
    <p>Ranking de títulos de terceros con mayor actividad en tu historial.</p>
  </div>

  <div *ngIf="cargando" class="status-msg">Sincronizando registros de tiempo compartido...</div>
  <div *ngIf="error" class="alert-simple error">{{ error }}</div>

  <div class="analysis-viewport" *ngIf="!cargando && juegos.length > 0">
    <div class="metric-row" *ngFor="let juego of juegos; let i = index">
      
      <div class="metric-info">
        <div class="metric-label">
          <span class="code-badge">Numero: {{ i + 1 }}</span><br>
          <span class="class-title">{{ juego.nombre }}</span>
        </div>
        <span class="metric-count">{{ juego.cantidad }} sesiones</span><br><br>
      </div>

      <div class="progress-container">
        <div class="progress-bar-flat" 
             [style.width.%]="(juego.cantidad / juegos[0].cantidad) * 100">
        </div>
      </div>
    </div>
        <button (click)="exportarJasper()">Exportar a pdf</button>
  </div>

  <div *ngIf="!cargando && juegos.length === 0" class="empty-notif">
    No se ha detectado actividad en títulos prestados.
  </div>
</div>