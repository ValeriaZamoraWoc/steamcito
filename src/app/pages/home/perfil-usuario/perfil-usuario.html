<div class="profile-page">
  <div *ngIf="cargando" class="loading-overlay">
    <div class="steam-spinner"></div>
    <p>Cargando perfil de usuario...</p>
  </div>

  <div *ngIf="error" class="error-banner">
    <span class="icon">‚ö†</span> {{ error }}
  </div>

  <div *ngIf="!cargando && usuario" class="profile-container">
    
    <header class="profile-header">
      <div class="profile-header-content">
        <div class="avatar-frame">
          <div class="avatar-placeholder">{{ usuario.nickname.charAt(0).toUpperCase() }}</div>
        </div>
        <div class="user-meta">
          <h2 class="nickname">{{ usuario.nickname }}</h2>
          <div class="user-details">
            <span class="detail-item"><strong>Pa√≠s:</strong> {{ usuario.pais }}</span>
            <span class="detail-item"><strong>Email:</strong> {{ usuario.mail }}</span>
          </div>
        </div>
        <div class="profile-level">
          <div class="level-badge">Nivel <span>10</span></div>
        </div>
      </div>
    </header>

    <section class="library-showcase">
      <div class="section-title">
        <h3>Biblioteca de Juegos</h3>
        <span class="count" *ngIf="bibliotecaVisible">{{ biblioteca.length }} juegos</span>
      </div>

      <div *ngIf="!bibliotecaVisible" class="empty-library locked">
        <div class="lock-icon-wrapper">
          <span class="big-lock">üîí</span>
        </div>
        <div class="lock-text">
          <h4>Perfil Privado</h4>
          <p>Este usuario ha decidido mantener su biblioteca fuera del alcance p√∫blico.</p>
        </div>
      </div>

      <div *ngIf="bibliotecaVisible && biblioteca.length === 0" class="empty-library">
        <p>Este usuario a√∫n no ha a√±adido juegos a su colecci√≥n.</p>
      </div>

      <div class="library-grid" *ngIf="bibliotecaVisible && biblioteca.length > 0">
        <div class="game-mini-card" *ngFor="let juego of biblioteca">
          <div class="image-container">
            <img [src]="juego.urlImagen" alt="Portada" class="game-thumb">
          </div>
          <div class="game-mini-info">
            <h4>{{ juego.nombreJuego }}</h4>
            <p class="price">Q {{ juego.precio }}</p>
          </div>
        </div>
      </div>
    </section>

  </div>
</div>