<div class="comment-thread">
  <div class="comment-card">
    <header class="comment-meta">
      <span class="user-id">{{ comentario.mail }}</span>
    </header>
    
    <div class="comment-text">
      <p>{{ comentario.contenido }}</p>
    </div>

    <footer class="comment-actions-bar">
      <div *ngIf="puedeResponder" class="action-links">
        <button (click)="mostrarRespuesta = !mostrarRespuesta" class="btn-quiet">
          {{ mostrarRespuesta ? 'Cancelar' : 'Responder' }}
        </button>
      </div>

      <div *ngIf="mostrarRespuesta && puedeResponder" class="inline-reply-editor">
        <textarea [(ngModel)]="respuesta" class="dark-input-minimal" placeholder="Escribe tu respuesta..."></textarea>
        <div class="reply-footer">
          <select [(ngModel)]="calificacion" class="simple-select">
            <option *ngFor="let n of [1,2,3,4,5]" [value]="n">{{n}} / 5</option>
          </select>
          <div class="btn-group">
            <button (click)="responder()" class="btn-primary-sm" [disabled]="!respuesta.trim()">Enviar</button>
          </div>
        </div>
      </div>

      <div *ngIf="puedeOcultar" class="admin-zone">
        <button class="btn-danger-quiet" (click)="ocultarComentario()">Ocultar</button>
      </div>
    </footer>
  </div>

  <div class="replies-indentation" *ngIf="comentario.respuestas?.length">
    <app-comentario
      *ngFor="let r of comentario.respuestas"
      [comentario]="r"
      [puedeResponder]="puedeResponder"
      [puedeOcultar]="puedeOcultar"
      (comentarioOcultado)="comentarioOcultado.emit()"
    ></app-comentario>
  </div>
</div>