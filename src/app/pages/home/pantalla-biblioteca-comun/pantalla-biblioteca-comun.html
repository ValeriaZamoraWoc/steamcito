<div class="biblioteca-container">
  <header class="section-header">
    <div class="header-main-content">
      <h2>Mi Biblioteca</h2>
      <div class="stats" *ngIf="juegos.length > 0">
        <span class="count-tag">{{ juegos.length }} juegos en total</span>
      </div>
    </div>

    <div class="acciones-biblioteca">
      <div class="privacy-control-group">
        <button
          class="btn-toggle-visibilidad"
          (click)="cambiarVisibilidad()"
          [disabled]="cambiandoVisibilidad"
          [class.is-public]="visibilidadBiblioteca"
          [class.is-private]="!visibilidadBiblioteca"
        >
          <span class="icon">{{ visibilidadBiblioteca ? 'üîí' : 'üåê' }}</span>
          {{ visibilidadBiblioteca ? 'Ocultar mi biblioteca' : 'Hacer p√∫blica mi biblioteca' }}
        </button>

        <p class="estado-visibilidad">
          Estado actual:
          <span class="status-badge" [class.public]="visibilidadBiblioteca">
            {{ visibilidadBiblioteca ? 'P√∫blica' : 'Privada' }}
          </span>
        </p>
      </div>
    </div>
  </header>

  <div *ngIf="cargando" class="loading-box">
    <div class="steam-spinner"></div>
    <p>Sincronizando con la nube...</p>
  </div>

  <div class="game-grid" *ngIf="!cargando && juegos.length > 0">
    <div class="game-card" *ngFor="let juego of juegos; trackBy: trackById" [class.is-installed]="juego.instalado">
      <div class="poster-wrapper">
        <img [src]="juego.urlImagen" alt="Portada" class="game-poster">
        <div class="card-overlay">
          <button *ngIf="!juego.instalado" class="btn-install"><span>‚¨á</span> Instalar</button>
          <button *ngIf="juego.instalado" class="btn-uninstall"><span>‚úñ</span> Desinstalar</button>
        </div>
      </div>
      <div class="game-info">
        <h3>{{ juego.nombreJuego }}</h3>
        <p class="desc">{{ juego.descripcion }}</p>
        <div class="status-tag" *ngIf="juego.instalado">
          <span class="dot"></span> INSTALADO
        </div>
      </div>
    </div>
  </div>
</div>