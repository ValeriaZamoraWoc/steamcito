<div class="admin-reports-container">
  <header class="admin-header-flat">
    <h2>Registro de Nuevo Título</h2>
    <p>Cumplimente la ficha técnica y adjunte el activo gráfico para la publicación en el catálogo.</p>
  </header>

  <div class="admin-router-box-flat">
    <div class="alert-flat-error" *ngIf="error">SISTEMA_ERROR: {{ error }}</div>
    <div class="status-msg-flat" style="border-color: var(--border); margin-bottom: 20px;" *ngIf="mensaje">
      OPERACION_EXITOSA: {{ mensaje }}
    </div>

    <form class="flat-form">
      <div [class.section-disabled]="idJuegoCreado !== null">
        <h3 class="group-label">01. Especificaciones Técnicas</h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label>Identificador del Título</label>
            <input [(ngModel)]="nombre" name="nombre" [disabled]="idJuegoCreado !== null" placeholder="Nombre oficial">
          </div>

          <div class="form-group">
            <label>Descripción del Producto</label>
            <textarea [(ngModel)]="descripcion" name="descripcion" rows="2" [disabled]="idJuegoCreado !== null"></textarea>
          </div>

          <div class="form-group">
            <label>Requerimientos de Hardware</label>
            <textarea [(ngModel)]="especificaciones" name="especificaciones" rows="2" [disabled]="idJuegoCreado !== null"></textarea>
          </div>
        </div>

        <div class="form-row-three">
          <div class="form-group">
            <label>Clasificación</label>
            <select [(ngModel)]="clasificacion" name="clasificacion" [disabled]="idJuegoCreado !== null">
              <option *ngFor="let c of clasificaciones" [value]="c.nombreCalsificacion">{{ c.nombreCalsificacion }}</option>
            </select>
          </div>
          <div class="form-group">
            <label>Categoría</label>
            <select [(ngModel)]="categoria" name="categoria" [disabled]="idJuegoCreado !== null">
              <option *ngFor="let c of categorias" [value]="c.nombreCategoria">{{ c.nombreCategoria }}</option>
            </select>
          </div>
          <div class="form-group">
            <label>Precio Unitario (Q)</label>
            <input type="number" [(ngModel)]="precio" name="precio" [disabled]="idJuegoCreado !== null">
          </div>
        </div>

        <div class="form-group">
          <label>Fecha de Lanzamiento</label>
          <input type="date" [(ngModel)]="fechaLanzamiento" name="fechaLanzamiento" [disabled]="idJuegoCreado !== null">
        </div>

        <button type="button" class="btn-flat-action" (click)="registrar()">
          {{ idJuegoCreado ? 'REGISTRO_GUARDADO' : 'GUARDAR_DATOS_TECNICOS' }}
        </button>
      </div>

      <div class="section-divider" *ngIf="idJuegoCreado"></div>

      <div class="form-section-flat" [class.section-locked]="idJuegoCreado === null">
        <h3 class="group-label">02. Activos Gráficos</h3>
        <p class="status-msg-flat" *ngIf="idJuegoCreado === null" style="padding: 10px; text-align: left;">
          BLOQUEADO: Se requiere validación de ficha técnica para habilitar carga de archivos.
        </p>
        
        <div class="file-control-group">
          <input type="file" (change)="onFileChange($event)" [disabled]="idJuegoCreado === null || imagenSubida" id="file-input">
          
          <button type="button" class="btn-flat-action" (click)="subirImagen()" 
            [disabled]="idJuegoCreado === null || archivoImagen === null || imagenSubida">
            {{ imagenSubida ? 'ARCHIVO_VERIFICADO' : 'SUBIR_IMAGEN_PORTADA' }}
          </button>
        </div>
      </div>

      <div class="form-footer-flat">
        <button type="button" class="btn-flat-primary" [disabled]="!imagenSubida" (click)="volverAlCatalogo()">
          FINALIZAR_PUBLICACION_CATALOGO
        </button>
      </div>
    </form>
  </div>
</div>